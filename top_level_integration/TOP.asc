Version 4
SHEET 1 2384 680
WIRE -624 -2016 -720 -2016
WIRE -720 -2000 -720 -2016
WIRE 64 -1952 -432 -1952
WIRE -624 -1920 -624 -1936
WIRE -624 -1904 -624 -1920
WIRE -192 -1904 -272 -1904
WIRE -64 -1904 -80 -1904
WIRE 64 -1904 64 -1952
WIRE 64 -1904 16 -1904
WIRE -720 -1856 -720 -1920
WIRE -720 -1824 -720 -1856
WIRE -624 -1824 -720 -1824
WIRE -432 -1824 -432 -1952
WIRE -336 -1824 -336 -1904
WIRE -336 -1824 -352 -1824
WIRE -304 -1824 -336 -1824
WIRE -192 -1808 -192 -1904
WIRE -192 -1808 -240 -1808
WIRE -176 -1808 -192 -1808
WIRE -80 -1808 -80 -1904
WIRE -80 -1808 -96 -1808
WIRE -48 -1808 -80 -1808
WIRE 64 -1808 64 -1904
WIRE 64 -1808 32 -1808
WIRE -48 -1792 -48 -1808
WIRE -32 -1792 -48 -1792
WIRE 512 -1776 336 -1776
WIRE 512 -1760 496 -1760
WIRE 1056 -1760 576 -1760
WIRE 1248 -1760 1120 -1760
WIRE 1344 -1760 1248 -1760
WIRE 496 -1696 496 -1760
WIRE 496 -1696 480 -1696
WIRE 544 -1696 496 -1696
WIRE 640 -1696 624 -1696
WIRE 768 -1696 704 -1696
WIRE -192 -1680 -192 -1808
WIRE -192 -1680 -2224 -1680
WIRE -64 -1680 -192 -1680
WIRE 416 -1680 416 -1696
WIRE 336 -1664 336 -1776
WIRE 336 -1664 0 -1664
WIRE -64 -1648 -112 -1648
WIRE 1392 -1648 1392 -1680
WIRE 1424 -1648 1392 -1648
WIRE 1600 -1648 1424 -1648
WIRE 1744 -1648 1680 -1648
WIRE 1792 -1648 1744 -1648
WIRE 336 -1632 336 -1664
WIRE 496 -1568 480 -1568
WIRE 544 -1568 496 -1568
WIRE 640 -1568 624 -1568
WIRE 736 -1568 704 -1568
WIRE 832 -1568 800 -1568
WIRE 416 -1552 416 -1568
WIRE -1776 -1536 -1888 -1536
WIRE -1648 -1536 -1776 -1536
WIRE 1392 -1536 1392 -1648
WIRE -1648 -1504 -1664 -1504
WIRE -1472 -1504 -1584 -1504
WIRE -1360 -1504 -1472 -1504
WIRE -1216 -1504 -1296 -1504
WIRE 496 -1488 496 -1568
WIRE 512 -1488 496 -1488
WIRE 336 -1456 336 -1568
WIRE 512 -1456 336 -1456
WIRE 672 -1456 576 -1456
WIRE 1056 -1456 736 -1456
WIRE 1248 -1456 1120 -1456
WIRE 1344 -1456 1248 -1456
WIRE -1776 -1440 -1776 -1536
WIRE -1584 -1440 -1584 -1504
WIRE -1584 -1440 -1680 -1440
WIRE 1744 -1440 1744 -1648
WIRE -1664 -1424 -1664 -1504
WIRE -1568 -1424 -1664 -1424
WIRE -1008 -1424 -1008 -1456
WIRE -800 -1424 -1008 -1424
WIRE -1008 -1376 -1008 -1424
WIRE -1680 -1360 -1680 -1440
WIRE -1648 -1360 -1680 -1360
WIRE -1776 -1328 -1776 -1376
WIRE -1648 -1328 -1776 -1328
WIRE -1568 -1328 -1568 -1424
WIRE -1568 -1328 -1584 -1328
WIRE -1472 -1328 -1568 -1328
WIRE -1344 -1328 -1472 -1328
WIRE -1152 -1328 -1280 -1328
WIRE 1456 -1312 1216 -1312
WIRE -2304 -1248 -2480 -1248
WIRE 1520 -1232 1520 -1312
WIRE 1520 -1232 1344 -1232
WIRE 1664 -1232 1520 -1232
WIRE 1744 -1232 1744 -1376
WIRE -2032 -1216 -2112 -1216
WIRE -112 -1216 -112 -1648
WIRE 1216 -1216 1216 -1312
WIRE 1216 -1216 -112 -1216
WIRE 1280 -1216 1216 -1216
WIRE 1744 -1216 1744 -1232
WIRE -1888 -1200 -1888 -1536
WIRE -1888 -1200 -1968 -1200
WIRE 1568 -1200 1344 -1200
WIRE -2976 -1184 -2992 -1184
WIRE -2848 -1184 -2976 -1184
WIRE -2704 -1184 -2704 -1296
WIRE -2704 -1184 -2784 -1184
WIRE -2672 -1184 -2704 -1184
WIRE -2624 -1184 -2624 -1296
WIRE -2624 -1184 -2640 -1184
WIRE -2480 -1184 -2480 -1248
WIRE -2480 -1184 -2624 -1184
WIRE -2432 -1184 -2480 -1184
WIRE -2304 -1184 -2304 -1248
WIRE -2304 -1184 -2400 -1184
WIRE -2144 -1184 -2304 -1184
WIRE -2112 -1184 -2112 -1216
WIRE -2112 -1184 -2144 -1184
WIRE -2032 -1184 -2064 -1184
WIRE -2016 -1184 -2032 -1184
WIRE -2672 -1168 -2672 -1184
WIRE -2640 -1168 -2640 -1184
WIRE -2432 -1168 -2432 -1184
WIRE -2400 -1168 -2400 -1184
WIRE -800 -1152 -800 -1424
WIRE -720 -1136 -720 -1152
WIRE -2704 -1088 -2704 -1184
WIRE -2144 -1088 -2704 -1088
WIRE -2112 -1088 -2144 -1088
WIRE -720 -1040 -720 -1056
WIRE -2640 -992 -2816 -992
WIRE -2224 -976 -2224 -1680
WIRE -2112 -976 -2112 -1088
WIRE -2016 -976 -2112 -976
WIRE -1952 -960 -1968 -960
WIRE -1888 -960 -1952 -960
WIRE -2064 -944 -2064 -1184
WIRE -2016 -944 -2064 -944
WIRE -2816 -912 -2816 -992
WIRE -2768 -912 -2816 -912
WIRE -2640 -912 -2640 -992
WIRE -2640 -912 -2736 -912
WIRE -2480 -912 -2640 -912
WIRE -2224 -912 -2400 -912
WIRE -2064 -912 -2064 -944
WIRE -2064 -912 -2224 -912
WIRE -2768 -896 -2768 -912
WIRE -2736 -896 -2736 -912
WIRE -2640 -896 -2640 -912
WIRE -2768 -880 -2768 -896
WIRE -1888 -848 -1888 -960
WIRE -1776 -848 -1888 -848
WIRE -1648 -848 -1776 -848
WIRE -240 -832 -400 -832
WIRE 0 -832 -176 -832
WIRE -1648 -816 -1664 -816
WIRE -1488 -816 -1584 -816
WIRE -1360 -816 -1488 -816
WIRE -1216 -816 -1296 -816
WIRE -1776 -768 -1776 -848
WIRE -1584 -752 -1584 -816
WIRE -1584 -752 -1680 -752
WIRE -1664 -736 -1664 -816
WIRE -1568 -736 -1664 -736
WIRE -1008 -736 -1008 -768
WIRE -800 -736 -800 -1040
WIRE -800 -736 -1008 -736
WIRE 1568 -112 1568 -1200
WIRE -1008 -688 -1008 -736
WIRE -1680 -672 -1680 -752
WIRE -1648 -672 -1680 -672
WIRE -128 -672 -160 -672
WIRE 0 -672 0 -832
WIRE 0 -672 -48 -672
WIRE -1776 -640 -1776 -704
WIRE -1648 -640 -1776 -640
WIRE -1568 -640 -1568 -736
WIRE -1568 -640 -1584 -640
WIRE -1488 -640 -1568 -640
WIRE -1344 -640 -1488 -640
WIRE -1152 -640 -1280 -640
WIRE 432 -640 432 -688
WIRE 464 -640 432 -640
WIRE 432 -624 432 -640
WIRE -576 -512 -704 -512
WIRE -544 -512 -576 -512
WIRE -400 -512 -400 -832
WIRE -400 -512 -464 -512
WIRE -304 -512 -400 -512
WIRE -160 -512 -160 -672
WIRE -160 -512 -240 -512
WIRE -128 -512 -160 -512
WIRE -704 -496 -704 -512
WIRE 0 -496 0 -672
WIRE 0 -496 -64 -496
WIRE 48 -496 0 -496
WIRE -400 -448 -400 -512
WIRE 48 -400 48 -496
WIRE 528 -368 464 -368
WIRE 704 -368 608 -368
WIRE 1152 -352 944 -352
WIRE -240 -320 -400 -320
WIRE 0 -320 -176 -320
WIRE 48 -304 48 -400
WIRE 112 -304 48 -304
WIRE 384 -304 192 -304
WIRE 0 -240 0 -320
WIRE 0 -208 0 -240
WIRE 112 -208 0 -208
WIRE 384 -208 384 -304
WIRE 384 -208 192 -208
WIRE 464 -208 464 -368
WIRE 464 -208 384 -208
WIRE 512 -208 464 -208
WIRE 944 -208 944 -352
WIRE 1024 -208 944 -208
WIRE 688 -192 576 -192
WIRE 704 -192 704 -368
WIRE 704 -192 688 -192
WIRE 1152 -192 1152 -352
WIRE 1312 -192 1152 -192
WIRE 512 -176 496 -176
WIRE 704 -176 704 -192
WIRE 896 -176 768 -176
WIRE 1024 -176 896 -176
WIRE -128 -160 -160 -160
WIRE 0 -160 0 -208
WIRE 0 -160 -48 -160
WIRE 1440 -112 1312 -112
WIRE 1568 -112 1440 -112
WIRE 896 -80 896 -96
WIRE -576 0 -576 -512
WIRE -544 0 -576 0
WIRE -400 0 -400 -320
WIRE -400 0 -464 0
WIRE -304 0 -400 0
WIRE -160 0 -160 -160
WIRE -160 0 -240 0
WIRE -128 0 -160 0
WIRE 0 16 0 -160
WIRE 0 16 -64 16
WIRE -400 64 -400 0
FLAG 544 -160 0
FLAG -400 -368 0
FLAG 304 -480 0
FLAG 304 -560 Vdd3
IOPIN 304 -560 Out
FLAG -96 -528 Vdd3
IOPIN -96 -528 In
FLAG 432 -544 0
FLAG 432 -768 Vdd3
IOPIN 432 -768 In
FLAG 464 -640 Vcm
IOPIN 464 -640 Out
FLAG -128 -480 vcm
IOPIN -128 -480 In
FLAG -96 -464 0
FLAG -704 -416 0
FLAG -400 144 0
FLAG -96 -16 Vdd3
IOPIN -96 -16 In
FLAG -128 32 Vcm
IOPIN -128 32 In
FLAG -96 48 0
FLAG 544 -224 Vdd3
IOPIN 544 -224 In
FLAG 496 -176 Vcm
IOPIN 496 -176 In
FLAG 1056 -224 Vdd3
IOPIN 1056 -224 In
FLAG 1056 -160 0
FLAG 1312 -32 0
FLAG 1440 -48 0
FLAG 896 -80 0
FLAG 1152 -128 0
FLAG -1008 -1280 0
FLAG -1008 -1552 Vdd
FLAG -2944 -1376 Vdd2
IOPIN -2944 -1376 Out
FLAG -2944 -1456 0
FLAG -2000 -1232 0
FLAG -1984 -992 0
FLAG -2640 -832 0
FLAG -2640 -1104 0
FLAG -2400 -1104 0
FLAG -2672 -1104 Vdd2
IOPIN -2672 -1104 In
FLAG -2736 -832 0
FLAG -1488 -880 0
FLAG -1488 -576 0
FLAG -1008 -592 0
FLAG -1008 -864 Vdd
FLAG -1472 -1568 0
FLAG -1472 -1264 0
FLAG -2432 -1104 Vdd2
IOPIN -2432 -1104 In
FLAG -2768 -832 Vdd2
IOPIN -2768 -832 In
FLAG -2000 -1168 Vdd2
IOPIN -2000 -1168 In
FLAG -1984 -928 Vdd2
IOPIN -1984 -928 In
FLAG -304 -1792 Vcm
FLAG -272 -1840 Vdd
FLAG -272 -1776 0
FLAG -32 -1824 Vcm
FLAG 0 -1840 Vdd
FLAG 0 -1776 0
FLAG -624 -1920 Vcm
FLAG -720 -2016 Vdd
FLAG -720 -1856 0
FLAG -32 -1696 Vdd
FLAG -32 -1632 0
FLAG 1680 -1584 0
FLAG 1424 -1648 Vsw
FLAG 1744 -1136 0
FLAG 1792 -1648 Vout
FLAG 1312 -1248 Vdd
FLAG 1312 -1184 0
FLAG 416 -1680 0
FLAG 416 -1552 0
FLAG 1392 -1440 0
FLAG 1248 -1760 Vgate_p
FLAG 1248 -1456 Vgate_n
FLAG 768 -1696 Vgate_n
FLAG 832 -1568 Vgate_p
FLAG 1392 -1776 Vdd
FLAG 0 -240 3kHz
IOPIN 0 -240 Out
FLAG 48 -400 1kHz
IOPIN 48 -400 Out
FLAG 688 -192 Vin_a
IOPIN 688 -192 Out
FLAG -2144 -1184 V_pwm_p
IOPIN -2144 -1184 Out
FLAG -2144 -1088 V_pwm_n
IOPIN -2144 -1088 Out
FLAG -2976 -1184 Vin_a
IOPIN -2976 -1184 In
SYMBOL LT1211 544 -256 R0
SYMATTR InstName U1
SYMBOL res 208 -320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL res 208 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL UniversalOpamp2 -96 -496 R0
SYMATTR InstName U2
SYMBOL res -32 -688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 2k
SYMBOL res -448 -528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL res -416 -464 R0
SYMATTR InstName R5
SYMATTR Value 5
SYMBOL cap -176 -848 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1.59µ
SYMBOL cap -240 -528 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1.59µ
SYMBOL voltage 304 -576 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL res 416 -784 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 416 -640 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL voltage -704 -512 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 0.9 0
SYMATTR InstName V2
SYMATTR Value SINE(0 0.45 1k 0 0 0 1000)
SYMBOL UniversalOpamp2 -96 16 R0
SYMATTR InstName U3
SYMBOL res -32 -176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 2k
SYMBOL res -448 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res -416 48 R0
SYMATTR InstName R10
SYMATTR Value 5
SYMBOL cap -176 -336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 0.53µ
SYMBOL cap -240 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 0.53µ
SYMBOL diode 1088 -176 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL LT1211 1056 -256 R0
SYMATTR InstName U4
SYMBOL res 624 -384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 1296 -208 R0
SYMATTR InstName R12
SYMATTR Value 12k
SYMBOL res 1296 -128 R0
SYMATTR InstName R13
SYMATTR Value 18k
SYMBOL cap 1424 -112 R0
SYMATTR InstName C5
SYMATTR Value 50n
SYMBOL cap 768 -192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 1µ
SYMBOL res 880 -192 R0
SYMATTR InstName R14
SYMATTR Value 500
SYMBOL cap 1136 -192 R0
SYMATTR InstName C7
SYMATTR Value 220n
SYMBOL res -1056 -1344 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 2k
SYMBOL res -1056 -1520 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 2k
SYMBOL cap -2784 -1200 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C14
SYMATTR Value 1µ
SYMBOL cap -2624 -832 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName Cbypass1
SYMATTR Value 1µ
SYMBOL cap -2208 -912 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C15
SYMATTR Value 1µ
SYMBOL res -2608 -1312 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rlarge1
SYMATTR Value 100k
SYMBOL res -2384 -928 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rbias2
SYMATTR Value 1k
SYMBOL voltage -2944 -1360 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL CD4049UB -2656 -1136 M90
SYMATTR InstName U10
SYMBOL CD4049UB -2416 -1136 M90
SYMATTR InstName U11
SYMBOL CD4049UB -2752 -864 M90
SYMATTR InstName U12
SYMBOL LTC6752 -2000 -1136 M180
SYMATTR InstName U13
SYMBOL LTC6752 -1984 -896 M180
SYMATTR InstName U14
SYMBOL cap -1504 -880 R0
SYMATTR InstName C16
SYMATTR Value 1µ
SYMBOL cap -1504 -640 R0
SYMATTR InstName C17
SYMATTR Value 1µ
SYMBOL npn -1072 -688 R0
SYMATTR InstName Q1
SYMATTR Value BC847A
SYMBOL pnp -1072 -768 M180
SYMATTR InstName Q2
SYMATTR Value BC857A
SYMBOL res -1056 -656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 2k
SYMBOL res -1056 -832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 2k
SYMBOL and -1616 -1584 R0
SYMATTR InstName A6
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL and -1616 -1408 R0
SYMATTR InstName A7
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL and -1616 -896 R0
SYMATTR InstName A8
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL and -1616 -720 R0
SYMATTR InstName A9
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv -1712 -1440 R90
SYMATTR InstName A10
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv -1344 -704 R0
SYMATTR InstName A11
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv -1360 -1568 R0
SYMATTR InstName A12
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv -1216 -1568 R0
SYMATTR InstName A13
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv -1344 -1392 R0
SYMATTR InstName A14
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv -1360 -880 R0
SYMATTR InstName A15
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv -1216 -880 R0
SYMATTR InstName A16
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv -1712 -768 R90
SYMATTR InstName A17
SYMATTR SpiceLine Vhigh=5 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL npn -1072 -1376 R0
SYMATTR InstName Q3
SYMATTR Value BC847A
SYMBOL pnp -1072 -1456 M180
SYMATTR InstName Q4
SYMATTR Value BC857A
SYMBOL cap -1488 -1568 R0
SYMATTR InstName C18
SYMATTR Value 1µ
SYMBOL cap -1488 -1328 R0
SYMATTR InstName C19
SYMATTR Value 1µ
SYMBOL ind -736 -1152 R0
SYMATTR InstName L4
SYMATTR Value 1000µ
SYMBOL res -704 -1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 16
SYMBOL res -704 -1056 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R31
SYMATTR Value 16
SYMBOL UniversalOpamp2 -272 -1808 R0
SYMATTR InstName U5
SYMBOL UniversalOpamp2 0 -1808 R0
SYMATTR InstName U15
SYMBOL res -336 -1840 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 8.2k
SYMBOL res -80 -1824 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R29
SYMATTR Value 6.8k
SYMBOL res 32 -1920 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 22k
SYMBOL cap -272 -1920 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 1n
SYMBOL res -640 -2032 R0
SYMATTR InstName R33
SYMATTR Value 1k
SYMBOL res -640 -1920 R0
SYMATTR InstName R34
SYMATTR Value 1k
SYMBOL voltage -720 -2016 R0
SYMATTR InstName V4
SYMATTR Value 5V
SYMBOL UniversalOpamp2 -32 -1664 R0
SYMATTR InstName U16
SYMBOL ind 1584 -1632 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L2
SYMATTR Value 100µ
SYMBOL cap 1664 -1648 R0
SYMATTR InstName c20
SYMATTR Value 47µ
SYMBOL res 1728 -1232 R0
SYMATTR InstName R35
SYMATTR Value 5
SYMBOL LED 1728 -1440 R0
SYMATTR InstName D3
SYMBOL res 1760 -1248 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R36
SYMATTR Value 10k
SYMBOL cap 1520 -1328 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C21
SYMATTR Value 47n
SYMBOL UniversalOpamp2 1312 -1216 M0
SYMATTR InstName U17
SYMBOL and 544 -1840 R0
SYMATTR InstName A22
SYMATTR SpiceLine Vhigh=4 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv 400 -1632 R90
SYMATTR InstName A23
SYMATTR SpiceLine Vhigh=4 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL and 544 -1536 R0
SYMATTR InstName A24
SYMATTR SpiceLine Vhigh=4 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL cap 480 -1712 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C22
SYMATTR Value 10n
SYMBOL cap 480 -1584 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C23
SYMATTR Value 1n
SYMBOL buf1 1056 -1824 R0
SYMATTR InstName A25
SYMATTR SpiceLine Vhigh=4 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL buf1 1056 -1520 R0
SYMATTR InstName A26
SYMATTR SpiceLine Vhigh=4 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL nmos 1344 -1536 R0
WINDOW 3 63 69 Left 2
WINDOW 0 67 37 Left 2
SYMATTR Value NTMD4N03R2
SYMATTR InstName M3
SYMBOL pmos 1344 -1680 M180
WINDOW 3 63 68 Left 2
SYMATTR Value RSR020P05
SYMATTR InstName M4
SYMBOL inv 704 -1632 R180
SYMATTR InstName A27
SYMATTR SpiceLine Vhigh=4 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv 704 -1504 R180
SYMATTR InstName A28
SYMATTR SpiceLine Vhigh=4 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv 800 -1504 R180
SYMATTR InstName A29
SYMATTR SpiceLine Vhigh=4 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL inv 672 -1520 R0
SYMATTR InstName A30
SYMATTR SpiceLine Vhigh=4 Vlow=0 Ref=1.5 Trise=30n Tfall=30n Td=2n
SYMBOL res 640 -1712 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R37
SYMATTR Value 10
SYMBOL res 640 -1584 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 10
TEXT -384 -1992 Left 5 ;Ramp Generator
TEXT 816 -1928 Left 6 ;Power Stage
TEXT 344 -1368 Left 5 ;Non-Overlap Clock Generator
TEXT 1584 -632 Left 6 ;Vref
TEXT -760 -552 Left 5 ;Vin_Audio
TEXT 1240 -240 Left 5 ;Vpeak
TEXT -2176 -1712 Left 5 ;Vramp
TEXT -1160 -1816 Left 2 !.tran 30ms uic
TEXT 1152 -1384 Left 2 ;Gate Driver
TEXT 160 -1696 Left 4 ;PWM
TEXT -16 -1248 Left 4 ;Vctrl
TEXT -1584 -1648 Left 6 ;H-Bridge
TEXT -440 -968 Left 6 ;Bandpass filter
TEXT 640 -496 Left 6 ;Peak-Detector
TEXT 1160 -1056 Left 6 ;Class D Amplifier
TEXT -2840 -664 Left 6 ;Differential end to end \n          Amplifier
RECTANGLE Normal 1168 -1408 1008 -1824 2
RECTANGLE Normal -500 -2036 160 -1708 2
RECTANGLE Normal 260 -1864 1912 -1008 2
RECTANGLE Normal -756 -924 400 188 2
RECTANGLE Normal 416 -448 1676 188 2
RECTANGLE Normal 1108 -1356 1912 -1008 2
RECTANGLE Normal -2892 -1392 -1848 -724 2
RECTANGLE Normal -1968 -1596 -616 -320 2
